docker_make:
  build:
    context: .
    dockerfile: ./buildfiles/build-env.dockerfile
  volumes:
    - ./tmp/makefiles:/makefiles
  add_docker: true
  cached: true

publisher:
  encrypted_env_file: tokens.crypt
  build:
    context: .
    dockerfile: ./buildfiles/build-env.dockerfile
  add_docker: true
  volumes:
  - ./tmp/reports:/opt/reports

test_moldesign_minimal:
  build:
    context: ./buildfiles
    dockerfile: ./buildfiles/moldesign-minimal-cache.dockerfile
  cached: true
  working_dir: /opt/molecular-design-toolkit/moldesign/_tests
  add_docker: true
  environment:
    TESTENV: minimal
  volumes:
    - ./tmp/reports:/opt/reports

test_moldesign_complete:
  build:
    context: ./buildfiles
    dockerfile: ./buildfiles/moldesign-complete-cache.dockerfile
  cached: true
  working_dir: /opt/molecular-design-toolkit/moldesign/_tests
  add_docker: true
  environment:
    TESTENV: complete
  volumes:
    - ./tmp/reports:/opt/reports

cache_nwchem_build:
  build:
    dockerfile: ./tmp/makefiles/Dockerfile.nwchem_build
  cached: true

cache_ambertools:
  build:
    dockerfile: ./tmp/makefiles/Dockerfile.ambertools
  cached: true

cache_pyscf_build:
  build:
    dockerfile: ./tmp/makefiles/Dockerfile.pyscf_build
  cached: true

cache_moldesign_minimal:
  build:
    dockerfile: ./tmp/makefiles/Dockerfile.moldesign_minimal
  cached: true

cache_openblas:
  build:
    dockerfile: ./tmp/makefiles/Dockerfile.openblas
  cached: true
